---
import BaseLayout from '../../layouts/BaseLayout.astro';

export async function getStaticPaths() {
  const pieces = await Astro.glob('../../content/commonplace/*.md');
  return pieces.map((piece) => ({
    params: { slug: piece.frontmatter.slug },
    props: { piece },
  }));
}

const { piece } = Astro.props;
const { Content } = piece;
const { title, description, author } = piece.frontmatter;
---

<BaseLayout title={`${title} | Devashish`} description={description}>
  <article>
    <header class="piece-header">
      <h1>{title}</h1>
      {author && <p class="piece-author">&mdash; {author}</p>}
    </header>

    <div class="piece-content">
      <Content />
    </div>

    <footer class="piece-footer">
      <a href="/commonplace">&larr; Back to commonplace</a>
    </footer>
  </article>
</BaseLayout>

<style>
  .piece-header {
    margin-bottom: 3rem;
  }

  .piece-header h1 {
    margin-bottom: 0.75rem;
  }

  .piece-author {
    font-family: var(--font-heading);
    font-size: 0.95rem;
    color: var(--color-text-muted);
    font-style: italic;
    margin: 0;
    letter-spacing: 0.01em;
  }

  .piece-content {
    /* Prose styling is handled in BaseLayout */
  }

  .piece-footer {
    margin-top: 3rem;
    padding-top: 2rem;
    border-top: 1px solid var(--color-border);
  }

  .piece-footer a {
    font-family: var(--font-heading);
    font-size: 0.9rem;
    color: var(--color-text-muted);
  }
</style>
